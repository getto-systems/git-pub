#!/bin/bash

git_wipe_widow_branch_main(){
  local branch

  for branch in $(git branch --format="%(refname):%(upstream)"); do
    git_wipe_widow_branch_delete
  done
}
git_wipe_widow_branch_delete(){
  local refname
  local upstream

  refname=${branch%:*}
  upstream=${branch#*:}

  if [ -z "$(git branch -r --list "${upstream#refs/remotes/}")" ]; then
    git br -d "${refname#refs/heads/}"
  fi
}

git_wipe_widow_branch_main "$@"
